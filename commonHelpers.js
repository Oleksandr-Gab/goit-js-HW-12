import{a as h,S as L,i as u}from"./assets/vendor-89feecc5.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerpolicy&&(s.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?s.credentials="include":e.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(e){if(e.ep)return;e.ep=!0;const s=r(e);fetch(e.href,s)}})();const m=document.querySelector(".gallery"),v=document.querySelector(".search-form"),d=document.querySelector(".loading"),a=document.querySelector(".btn-load"),b=h.create({baseURL:"https://pixabay.com/api/",params:{key:"41686068-f8a1ddec694d7ca7a5960473b",image_type:"photo",orientation:"horizontal",safesearch:!0}});function w(o=[]){const t=o.reduce((r,{largeImageURL:n,webformatURL:e,tags:s,likes:c,views:g,comments:f,downloads:y})=>r+`<li class="gallery-item">
    <a href=${n}> 
      <img class="gallery-img" src =${e} alt=${s}/>
    </a>
    <div class="gallery-text-box">
      <p>Likes: <span class="text-value">${c}</span></p>
      <p>views: <span class="text-value">${g}</span></p>
      <p>comments: <span class="text-value">${f}</span></p>
      <p>downloads: <span class="text-value">${y}</span></p>
  </div>
  </li>`,"");m.insertAdjacentHTML("beforeend",t),S.refresh()}const S=new L(".gallery a",{nav:!0,captionDelay:250,captionsData:"alt",close:!0,enableKeyboard:!0,docClose:!0}),x=async o=>{try{return(await b.get("",{params:o})).data}catch(t){console.error(t)}},k=o=>{let t=1,r=!1;const n=40;return async()=>{try{if(r)return;const{hits:e,totalHits:s}=await x({page:t,per_page:n,q:o});if(t>=Math.ceil(s/n)&&(r=!0),t++,r&&s!=0&&(a.style.display="none",H()),s==0){I();return}return e}catch(e){console.error(e)}}};let i=null,l=null;v.addEventListener("submit",async o=>{o.preventDefault(),i!=null&&(a.removeEventListener("click",i),a.removeEventListener("click",l),i=null);const r=new FormData(o.currentTarget).get("search");if(!r){E();return}m.innerHTML="",a.style.display="block";const n=k(r);o.currentTarget.reset(),i=async()=>{const e=await p({promise:n,spinner:d});w(e)},await p({promise:i,spinner:d}),l=async()=>{await q({promise:i})},a.addEventListener("click",i),a.addEventListener("click",l)});const p=async({promise:o,spinner:t,className:r="is-hidden"})=>{t.classList.remove(r),a.classList.add(r);const n=await o();return t.classList.add(r),a.classList.remove(r),n},q=async({promise:o})=>{const r=document.querySelector(".gallery-item").getBoundingClientRect().height;return await o(),window.scrollBy({top:r*2,left:0,behavior:"smooth"}),o},E=()=>u.warning({position:"topRight",message:"Please, fill in the field!"}),H=()=>u.info({position:"topRight",message:"We're sorry, but you've reached the end of search results."}),I=()=>u.error({position:"topRight",message:"Sorry, there are no images matching your search query. Please try again!"});
//# sourceMappingURL=commonHelpers.js.map
